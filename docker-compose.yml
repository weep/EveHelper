version: '3'
services:
    mongo:
        image: mongo:latest
        environment:
          - MONGO_INITDB_ROOT_USERNAME=admin
          - MONGO_INITDB_ROOT_PASSWORD=admin
          - MONGO_INITDB_DATABASE=admin
    mongo_client:
        image: mongoclient/mongoclient
        ports:
          - "8084:3000"
        depends_on:
          - mongo
        environment:
          - MONGOCLIENT_DEFAULT_CONNECTION_URL=mongodb://admin:admin@mongo:27017
          - VIRTUAL_HOST=mc.eh.local
    nginx-proxy:
        image: jwilder/nginx-proxy
        ports:
          - "81:80"
        volumes:
          - ~/test.sock:/tmp/docker.sock:ro
    whoami:
        image: jwilder/whoami
        environment:
          - VIRTUAL_HOST=whoami.local
